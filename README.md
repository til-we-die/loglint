# Loglint ‚Äî —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –ª–æ–≥-—Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è Go

[![Go Version](https://img.shields.io/badge/Go-‚â•1.21-00ADD8?logo=go)](https://golang.org/doc/devel/release)

`loglint` ‚Äî –∫–∞—Å—Ç–æ–º–Ω—ã–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –Ω–∞ –±–∞–∑–µ [`golang.org/x/tools/go/analysis`](https://pkg.go.dev/golang.org/x/tools/go/analysis), –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ª–æ–≥-—Å–æ–æ–±—â–µ–Ω–∏—è (`slog`, `zap` –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –≤—ã–∑–æ–≤—ã) –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–ª–µ–¥—É—é—â–∏–º –ø—Ä–∞–≤–∏–ª–∞–º:

* —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å–æ —Å—Ç—Ä–æ—á–Ω–æ–π –±—É–∫–≤—ã
* —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º (–ª–∞—Ç–∏–Ω–∏—Ü–∞)
* –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —ç–º–æ–¥–∑–∏ –∏ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤
* –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (password, token, secret –∏ —Ç.–¥.)

–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ AST, –Ω–µ —Ç—Ä–µ–±—É—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã, –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `golangci-lint` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–ª–∞–≥–∏–Ω–∞.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** —á–µ—Ä–µ–∑ JSON-—Ñ–∞–π–ª (–º–æ–∂–Ω–æ –≤–∫–ª—é—á–∞—Ç—å/–æ—Ç–∫–ª—é—á–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞)
* **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤** –¥–ª—è –ø–æ–∏—Å–∫–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
* **–ê–Ω–∞–ª–∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ª–æ–≥–≥–µ—Ä–æ–≤:** `log/slog` –∏ `zap.Logger`
* **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å `golangci-lint`** (—Å–±–æ—Ä–∫–∞ –∫–∞–∫ –ø–ª–∞–≥–∏–Ω)

## –ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:

| –ü—Ä–∞–≤–∏–ª–æ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä –Ω–∞—Ä—É—à–µ–Ω–∏—è |
|---------|----------|------------------|
| **lowercase** | –°–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å–æ —Å—Ç—Ä–æ—á–Ω–æ–π –±—É–∫–≤—ã | `slog.Info("Server started")` |
| **english** | –°–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º (–ª–∞—Ç–∏–Ω–∏—Ü–∞) | `slog.Info("–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞")` |
| **special_chars** | –ó–∞–ø—Ä–µ—â–µ–Ω—ã —ç–º–æ–¥–∑–∏ –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–Ω–∞–∫–∏ –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏ | `slog.Info("failed!!")`, `slog.Info("üéâ success")` |
| **sensitive** | –ó–∞–ø—Ä–µ—â–µ–Ω—ã —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ | `slog.Info("user password: 123")` |

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

* Go ‚â• 1.21 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 1.24+)
* Git
* –õ—é–±–∞—è Unix-–ø–æ–¥–æ–±–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (Linux, macOS, WSL)

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é Go:

```bash
go version
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/til-we-die/loglint.git
cd loglint
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
go mod tidy
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –§–∞–π–ª `.loglint.json`

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```json
{
  "enable_rules": ["lowercase", "english", "special_chars", "sensitive"],

  "custom_sensitive_keywords": [
    "apikey",
    "private_key",
    "access_token",
    "jwt"
  ],

  "custom_sensitive_patterns": [
    "\\\\b[A-Z]{5,}\\\\b",
    "key-[a-f0-9]{32}"
  ],

  "custom_zap_sensitive_keys": [
    "jwt",
    "private_key",
    "access_token"
  ],

  "lowercase": {
    "enabled": true,
    "allow_numbers": true,
    "allow_symbols": true
  },

  "english": {
    "enabled": true,
    "allowed_non_latin": ["√©", "√º", "√ü"]
  },

  "special_chars": {
    "enabled": true,
    "allow_emojis": false,
    "allow_special": false
  },

  "sensitive": {
    "enabled": true,
    "extra_patterns": [
      "\\\\b\\\\d{16}\\\\b",
      "\\\\b[0-9a-f]{64}\\\\b"
    ],
    "strict_mode": true
  }
}
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| `enable_rules` | –°–ø–∏—Å–æ–∫ –≤–∫–ª—é—á–µ–Ω–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª |
| `custom_sensitive_keywords` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ |
| `custom_sensitive_patterns` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ regex-–ø–∞—Ç—Ç–µ—Ä–Ω—ã |
| `custom_zap_sensitive_keys` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–ª—é—á–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–ª–µ–π zap |
| `lowercase.allow_numbers` | –†–∞–∑—Ä–µ—à–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å —Ü–∏—Ñ—Ä—ã |
| `lowercase.allow_symbols` | –†–∞–∑—Ä–µ—à–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å —Å–∏–º–≤–æ–ª–∞ |
| `english.allowed_non_latin` | –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –Ω–µ–ª–∞—Ç–∏–Ω—Å–∫–∏–µ —Å–∏–º–≤–æ–ª—ã |
| `special_chars.allow_emojis` | –†–∞–∑—Ä–µ—à–∏—Ç—å —ç–º–æ–¥–∑–∏ –≤ –ª–æ–≥–∞—Ö |
| `special_chars.allow_special` | –†–∞–∑—Ä–µ—à–∏—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–Ω–∞–∫–∏ –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏ |
| `sensitive.strict_mode` | –í–∫–ª—é—á–∏—Ç—å —Å—Ç—Ä–æ–≥—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–ª–æ–≤ |

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ö–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä

```bash
go vet -vettool=$(which analyzer) ./...
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `golangci-lint`

1. **–°–æ–±–µ—Ä–∏—Ç–µ –ø–ª–∞–≥–∏–Ω:**

```bash
go build -o loglint.so -buildmode=plugin main.go
```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ `.golangci.yml`:**

```yaml
linters-settings:
  custom:
    loglint:
      path: /path/to/loglint.so
      config: /path/to/.loglint.json

linters:
  enable:
    - loglint
```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ª–∏–Ω—Ç–µ—Ä:**

```bash
golangci-lint run
```


## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö –ø—Ä–∞–≤–∏–ª:

```bash
go test ./... -v
```
